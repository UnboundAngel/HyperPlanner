@import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap");

:root {
  --page-bg: #e8ecf7;
  --page-gradient-a: rgba(99, 102, 241, 0.18);
  --page-gradient-b: rgba(14, 165, 233, 0.08);
  --page-gradient-c: rgba(232, 121, 249, 0.18);

  --card-glass: rgba(255, 255, 255, 0.92);
  --card-glass-muted: rgba(255, 255, 255, 0.75);
  --border-glass: rgba(255, 255, 255, 0.7);
  --border-strong: rgba(148, 163, 184, 0.35);
  --surface-1: var(--card-glass);
  --surface-2: var(--card-glass-muted);
  --surface-3: var(--border-strong);

  --text-main: #0f172a;
  --text-muted: #6b7280;
  --text-soft: #94a3b8;

  --accent: #6366f1;
  --accent-strong: #4c53ff;
  --accent-soft: rgba(99, 102, 241, 0.12);
  --accent-gradient: linear-gradient(120deg, #6366f1, #8b5cf6, #ec4899);
  --accent-pill: linear-gradient(90deg, #6366f1, #4ade80);
  --selection-bg: rgba(99, 102, 241, 0.28);
  --selection-fg: #0f172a;
  --input-fg: var(--text-main);

  --prio-high: #f97316;
  --prio-high-bg: rgba(249, 115, 22, 0.14);
  --prio-medium: #6366f1;
  --prio-medium-bg: rgba(99, 102, 241, 0.16);
  --prio-low: #22c55e;
  --prio-low-bg: rgba(34, 197, 94, 0.16);

  --radius-pill: 999px;
  --radius-lg: 22px;
  --radius-md: 12px;
  --radius-sm: 8px;

  --shadow-soft: 0 15px 45px rgba(15, 23, 42, 0.12);
  --shadow-lift: 0 30px 65px rgba(15, 23, 42, 0.18);
  --shadow-focus: 0 15px 40px rgba(99, 102, 241, 0.3);

  --font-sans: "Inter", -apple-system, BlinkMacSystemFont, "SF Pro Text",
    system-ui, sans-serif;
}

*,
*::before,
*::after {
  box-sizing: border-box;
}

.hidden {
  display: none !important;
}

html,
body {
  height: 100%;
}

body {
  margin: 0;
  font-family: var(--font-sans);
  background: radial-gradient(160% 100% at 10% 10%, var(--page-gradient-a), transparent),
    radial-gradient(110% 80% at 90% 0%, var(--page-gradient-b), transparent),
    radial-gradient(130% 100% at 50% 100%, var(--page-gradient-c), transparent),
    var(--page-bg);
  color: var(--text-main);
  -webkit-font-smoothing: antialiased;
  display: flex;
  justify-content: center;
  align-items: stretch;
  position: relative;
  overflow-x: hidden;
  transition: background 0.6s ease;
}

body[data-theme="work"] {
  --page-gradient-a: rgba(59, 130, 246, 0.22);
  --page-gradient-b: rgba(37, 99, 235, 0.15);
  --page-gradient-c: rgba(99, 102, 241, 0.25);
  --accent: #2563eb;
}

body[data-theme="personal"] {
  --page-gradient-a: rgba(244, 114, 182, 0.2);
  --page-gradient-b: rgba(251, 161, 183, 0.2);
  --page-gradient-c: rgba(248, 191, 144, 0.18);
  --accent: #ec4899;
}

body[data-theme="study"] {
  --page-gradient-a: rgba(14, 165, 233, 0.2);
  --page-gradient-b: rgba(45, 212, 191, 0.18);
  --page-gradient-c: rgba(99, 102, 241, 0.18);
  --accent: #0ea5e9;
}

body[data-theme="health"] {
  --page-gradient-a: rgba(34, 197, 94, 0.25);
  --page-gradient-b: rgba(16, 185, 129, 0.2);
  --page-gradient-c: rgba(74, 222, 128, 0.18);
  --accent: #059669;
}

body[data-theme="travel"] {
  --page-gradient-a: rgba(248, 196, 113, 0.25);
  --page-gradient-b: rgba(251, 113, 133, 0.2);
  --page-gradient-c: rgba(129, 140, 248, 0.18);
  --accent: #f97316;
}

body[data-theme="finance"] {
  --page-gradient-a: rgba(45, 212, 191, 0.2);
  --page-gradient-b: rgba(16, 185, 129, 0.2);
  --page-gradient-c: rgba(59, 130, 246, 0.2);
  --accent: #0d9488;
}

body::before,
body::after {
  content: "";
  position: fixed;
  width: 420px;
  height: 420px;
  filter: blur(120px);
  z-index: 0;
  opacity: 0.4;
  pointer-events: none;
}

body::before {
  background: #d8b4fe;
  top: -150px;
  right: 6%;
}

body::after {
  background: #93c5fd;
  bottom: -200px;
  left: 4%;
}

#app {
  position: relative;
  z-index: 1;
  width: min(1500px, 100%);
  min-height: 100vh;
  padding: 24px 32px 36px;
  display: flex;
  flex-direction: column;
  gap: 24px;
}

/* ===== Header ===== */

.app-header {
  display: grid;
  grid-template-columns: 1fr auto;
  align-items: center;
  background: var(--card-glass);
  border-radius: 26px;
  border: 1px solid var(--border-glass);
  padding: 18px 28px;
  box-shadow: var(--shadow-soft);
  backdrop-filter: blur(18px);
}

.header-left {
  display: flex;
  align-items: center;
  gap: 28px;
  flex-wrap: wrap;
}

.logo-block {
  display: flex;
  align-items: center;
  gap: 14px;
}

.logo-pill {
  width: 52px;
  height: 52px;
  border-radius: 16px;
  background: var(--accent-gradient);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  color: var(--color-accent-foreground);
  font-size: 1rem;
  font-weight: 700;
  letter-spacing: 0.06em;
  box-shadow: var(--shadow-focus);
}

.logo-pill img {
  width: 70%;
  height: 70%;
  object-fit: contain;
}

.logo-text h1 {
  margin: 0;
  font-size: 1.35rem;
  text-transform: uppercase;
  letter-spacing: 0.1em;
}

.logo-text p {
  margin: 4px 0 0;
  color: var(--text-soft);
  font-size: 0.9rem;
  letter-spacing: 0.04em;
}

.header-tabs {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 4px;
  border-radius: var(--radius-pill);
  background: rgba(99, 102, 241, 0.08);
}

.nav-tab {
  border: none;
  background: transparent;
  color: var(--text-soft);
  font-size: 0.85rem;
  font-weight: 600;
  padding: 10px 18px;
  border-radius: var(--radius-pill);
  cursor: pointer;
  transition: color 0.2s ease, background 0.2s ease, transform 0.2s ease;
}

.nav-tab:hover {
  color: var(--text-main);
  transform: translateY(-1px);
}

.nav-tab.active {
  color: var(--color-accent-foreground);
  background: var(--accent-gradient);
  box-shadow: var(--shadow-focus);
}

.header-actions {
  display: flex;
  gap: 12px;
  justify-self: flex-end;
  flex-wrap: wrap;
}

.layout-picker {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  background: var(--surface-2);
  border: 1px solid var(--border-glass);
  border-radius: var(--radius-pill);
  padding: 4px 8px;
}

.layout-picker select {
  min-width: 140px;
  padding: 8px 10px;
  border: 1px solid rgba(148, 163, 184, 0.4);
  border-radius: var(--radius-pill);
  background: rgba(255, 255, 255, 0.9);
  color: var(--text-main);
  font-weight: 600;
}

/* ===== Hero ===== */

.hero-panel {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 16px;
}

.phase-row {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 12px;
  margin-bottom: 10px;
}

.phase-card {
  border-radius: 18px;
  border: 1px solid var(--border-glass);
  padding: 12px 16px;
  background: var(--surface-1);
  box-shadow: var(--shadow-soft);
  color: var(--color-card-foreground);
}

.phase-card header {
  display: flex;
  justify-content: space-between;
  font-size: 0.8rem;
  text-transform: uppercase;
  letter-spacing: 0.18em;
  color: var(--text-soft);
}

.phase-card strong {
  color: var(--text-main);
}

.phase-card p {
  margin: 6px 0 0;
  font-size: 0.85rem;
  color: var(--color-card-foreground);
}

.phase-task-list {
  margin: 8px 0 0;
  padding-left: 18px;
  font-size: 0.78rem;
  color: var(--text-muted);
}
.hero-card {
  position: relative;
  border-radius: 24px;
  padding: 20px 22px;
  border: 1px solid var(--border-glass);
  background: var(--surface-1);
  box-shadow: var(--shadow-soft);
  overflow: hidden;
  min-height: 160px;
  color: var(--color-card-foreground);
}

:root[data-variant-herocard="compact"] .hero-card {
  padding: 16px 18px;
  min-height: 130px;
}

:root[data-variant-herocard="minimal"] .hero-card {
  background: var(--surface-1);
  box-shadow: none;
  border-style: dashed;
}

:root[data-variant-herocard="minimal"] .hero-card::before {
  display: none;
}

:root[data-variant-herocard="wide"] .hero-card {
  min-height: 190px;
}

:root[data-variant-herocard="minimal"] .hero-card p {
  display: none;
}

:root[data-variant-herocard="compact"] .hero-card p {
  font-size: 0.85rem;
}

:root[data-variant-herocard="minimal"] .hero-chip {
  display: none;
}

:root[data-variant-herocard="wide"] .hero-card {
  display: grid;
  grid-template-columns: 1.2fr 1fr;
  align-items: center;
}

.hero-card,
.card,
.calendar-grid {
  transition: transform 0.35s ease, box-shadow 0.35s ease;
}

.hero-card:hover,
.card:hover {
  transform: translateY(-4px);
  box-shadow: 0 30px 60px rgba(15, 23, 42, 0.18);
}

.hero-card::before {
  content: "";
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at 30% 20%, var(--accent-soft), transparent 55%);
  opacity: 0.6;
  pointer-events: none;
}

.hero-card-next {
  background: linear-gradient(135deg, var(--accent-soft), var(--surface-1));
}

.hero-card-focus {
  background: linear-gradient(135deg, var(--prio-low-bg), var(--surface-1));
}

.hero-card-alerts {
  background: linear-gradient(135deg, var(--surface-1), var(--surface-2));
}

.hero-card h3 {
  margin: 6px 0 4px;
  font-size: 1.2rem;
  color: var(--color-card-foreground);
  line-height: 1.3;
}

.hero-card p {
  margin: 0;
  font-size: 0.92rem;
  color: var(--text-muted);
  line-height: 1.4;
}

.hero-card-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.hero-label {
  font-size: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 0.2em;
  color: var(--text-soft);
}

.hero-chip {
  font-size: 0.78rem;
  padding: 6px 14px;
  border-radius: var(--radius-pill);
  background: var(--surface-2);
  color: var(--color-card-foreground);
  border: 1px solid var(--border-glass);
}

.hero-metric {
  display: flex;
  flex-direction: column;
  margin-top: 12px;
}

.hero-metric strong {
  font-size: 2.4rem;
  line-height: 1;
  color: var(--color-card-foreground);
}

.hero-progress {
  width: 100%;
  height: 10px;
  border-radius: var(--radius-pill);
  background: rgba(255, 255, 255, 0.35);
  margin-top: 14px;
  overflow: hidden;
  border: 1px solid rgba(255, 255, 255, 0.5);
}

.hero-progress-bar {
  width: 0;
  height: 100%;
  background: linear-gradient(120deg, #4ade80, #22c55e);
  border-radius: inherit;
  transition: width 0.4s ease;
}

.hero-mini-actions {
  margin-top: 18px;
}

.hero-mini-actions .btn {
  box-shadow: none;
}

:root[data-toggle-density="compact"] .hero-card {
  padding: 14px 16px;
}

:root[data-toggle-density="spacious"] .hero-card {
  padding: 24px 26px;
}

:root[data-toggle-radius="sharp"] .hero-card,
:root[data-toggle-radius="sharp"] .task-item,
:root[data-toggle-radius="sharp"] .task-board-item {
  border-radius: 12px;
}

:root[data-toggle-radius="pill"] .hero-card,
:root[data-toggle-radius="pill"] .task-item,
:root[data-toggle-radius="pill"] .task-board-item {
  border-radius: 28px;
}

:root[data-toggle-shadow="flat"] .hero-card,
:root[data-toggle-shadow="flat"] .task-item,
:root[data-toggle-shadow="flat"] .task-board-item {
  box-shadow: none;
  border: 1px dashed var(--border-strong);
}

:root[data-toggle-shadow="subtle"] .hero-card,
:root[data-toggle-shadow="subtle"] .task-item,
:root[data-toggle-shadow="subtle"] .task-board-item {
  box-shadow: var(--shadow-soft);
}

:root[data-toggle-shadow="lifted"] .hero-card,
:root[data-toggle-shadow="lifted"] .task-item,
:root[data-toggle-shadow="lifted"] .task-board-item {
  box-shadow: 0 24px 50px rgba(15, 23, 42, 0.16);
}

/* ===== Layout ===== */

.layout {
  display: grid;
  grid-template-columns: 330px minmax(0, 2fr) 320px;
  gap: 20px;
  align-items: start;
  padding: 26px;
  border-radius: 36px;
  background: rgba(255, 255, 255, 0.3);
  box-shadow: var(--shadow-soft);
  backdrop-filter: blur(20px);
  position: relative;
}

.layout::before {
  content: "";
  position: absolute;
  inset: 6px;
  border-radius: 32px;
  border: 1px solid rgba(255, 255, 255, 0.4);
  pointer-events: none;
}

.column {
  display: flex;
  flex-direction: column;
  gap: 18px;
}

/* ===== Cards ===== */

.card {
  background: var(--surface-1);
  border-radius: var(--radius-lg);
  border: 1px solid var(--border-glass);
  padding: 20px 22px 22px;
  box-shadow: var(--shadow-soft);
  backdrop-filter: blur(16px);
  position: relative;
  overflow: hidden;
  color: var(--color-card-foreground);
}

.card::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  border: 1px solid var(--border-glass);
  pointer-events: none;
}

.card h2 {
  margin: 0 0 16px;
  font-size: 0.95rem;
  letter-spacing: 0.18em;
  text-transform: uppercase;
  color: var(--color-card-foreground);
}

.card-stretch {
  min-height: 560px;
}

.card-quick {
  background: linear-gradient(145deg, var(--accent-soft), rgba(255, 255, 255, 0.04)), var(--surface-1);
  border-color: var(--border-glass);
  color: var(--color-card-foreground);
}

.card-quick,
.card-quick h2,
.card-quick p,
.card-quick label,
.card-quick .status-line,
.card-quick .field-actions,
.card-quick .token-chip {
  color: var(--color-card-foreground);
}

.card-quick input,
.card-quick textarea,
.card-quick select,
.card-quick .smart-input {
  background: var(--input-bg, var(--surface-2));
  border-color: var(--border-glass);
  color: var(--input-fg, var(--color-card-foreground));
}

.card-quick input::placeholder,
.card-quick textarea::placeholder {
  color: var(--text-soft);
}

.card-tonal {
  background: var(--surface-2);
  border-color: var(--border-glass);
  color: var(--color-card-foreground);
}

[data-panel-id] {
  position: relative;
}

.panel-controls {
  position: absolute;
  top: 8px;
  left: 8px;
  right: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
  transition: opacity 0.2s ease, transform 0.2s ease;
  z-index: 2;
}

[data-panel-id]:hover .panel-controls,
[data-panel-id]:focus-within .panel-controls {
  opacity: 1;
  transform: translateY(-1px);
  pointer-events: auto;
  visibility: visible;
}

.panel-handle,
.panel-hide-btn {
  pointer-events: auto;
  border: none;
  background: rgba(255, 255, 255, 0.14);
  color: var(--color-card-foreground);
  width: 30px;
  height: 28px;
  border-radius: 9px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: grab;
  transition: background 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease;
  box-shadow: 0 8px 18px rgba(15, 23, 42, 0.16);
  backdrop-filter: blur(8px);
}

.panel-hide-btn {
  position: absolute;
  right: 0;
  top: 0;
  width: 34px;
  height: 34px;
  cursor: pointer;
  background: rgba(15, 23, 42, 0.24);
  color: #e2e8f0;
}

.panel-handle:active {
  cursor: grabbing;
  transform: translateY(1px);
}

.panel-handle:hover,
.panel-hide-btn:hover {
  background: rgba(99, 102, 241, 0.35);
}

.panel-handle-dots {
  display: grid;
  grid-template-columns: repeat(3, 5px);
  grid-auto-rows: 5px;
  gap: 3px;
}

.panel-handle-dot {
  width: 5px;
  height: 5px;
  border-radius: 50%;
  background: currentColor;
  box-shadow: 0 0 0 1px rgba(15, 23, 42, 0.08);
}

.drawer-cta {
  box-shadow: var(--shadow-soft);
  display: none;
}

.sidebar-toggle {
  position: fixed;
  top: 50%;
  right: 10px;
  transform: translateY(-50%);
  z-index: 11;
  padding: 10px 12px;
  background: linear-gradient(135deg, rgba(99, 102, 241, 0.9), rgba(59, 130, 246, 0.9));
  color: #fff;
  border: none;
  border-radius: 14px 0 0 14px;
  box-shadow: 0 18px 40px rgba(15, 23, 42, 0.28);
  cursor: pointer;
  writing-mode: vertical-rl;
  text-orientation: mixed;
}

.glass-sidebar {
  position: fixed;
  top: 0;
  right: -420px;
  width: 360px;
  height: 100vh;
  padding: 18px;
  background: linear-gradient(135deg, rgba(15, 23, 42, 0.82), rgba(26, 35, 58, 0.78));
  backdrop-filter: blur(14px);
  border-left: 1px solid rgba(148, 163, 184, 0.25);
  box-shadow: -18px 0 50px rgba(15, 23, 42, 0.35);
  color: #e2e8f0;
  transition: right 0.28s ease;
  z-index: 12;
  overflow-y: auto;
}

.glass-sidebar.open {
  right: 0;
}

.glass-sidebar .sidebar-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: 12px;
}

.glass-sidebar .sidebar-links {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-bottom: 12px;
}

.sidebar-chip {
  border: 1px solid rgba(148, 163, 184, 0.3);
  background: rgba(255, 255, 255, 0.06);
  color: #e2e8f0;
  border-radius: 12px;
  padding: 8px 10px;
  cursor: pointer;
}

.glass-sidebar .sidebar-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.sidebar-card {
  padding: 12px;
  border-radius: 14px;
  background: rgba(255, 255, 255, 0.04);
  border: 1px solid rgba(148, 163, 184, 0.2);
  box-shadow: 0 12px 28px rgba(15, 23, 42, 0.2);
}

.sidebar-card h4 {
  margin: 0 0 4px;
  color: #fff;
}

.sidebar-card p {
  margin: 0 0 8px;
  color: #cbd5e1;
}

.panel-hidden {
  display: none !important;
}

[data-panel-id].is-panel-dragging {
  opacity: 0.6;
  transform: scale(0.98);
}

.panel-placeholder {
  border: 2px dashed rgba(99, 102, 241, 0.35);
  border-radius: var(--radius-lg);
  background: rgba(99, 102, 241, 0.08);
  margin-bottom: 18px;
  min-height: 120px;
  transition: transform 0.2s ease, opacity 0.2s ease;
}

.hero-panel .panel-placeholder {
  flex: 1 1 240px;
  margin-bottom: 0;
}

.column,
.hero-panel {
  position: relative;
}

[data-panel-container].is-drop-target {
  outline: 2px dashed rgba(99, 102, 241, 0.4);
  border-radius: 20px;
}

.panel-drag-ghost {
  position: fixed;
  top: 0;
  left: 0;
  pointer-events: none;
  z-index: 9999;
  opacity: 0.9;
  border-radius: 24px;
  border: 1px dashed rgba(99, 102, 241, 0.35);
  box-shadow: 0 25px 60px rgba(15, 23, 42, 0.25);
  background: linear-gradient(145deg, rgba(255, 255, 255, 0.9), rgba(226, 232, 255, 0.85));
  padding: 18px;
  min-width: 220px;
}

.calendar-shell {
  padding: 24px 26px 28px;
  background: linear-gradient(170deg, rgba(255, 255, 255, 0.95), rgba(226, 232, 255, 0.85));
  color: #0f172a;
}

.calendar-shell h3,
.calendar-shell h4,
.calendar-shell .status-line,
.calendar-shell .pill,
.calendar-shell .calendar-time-cell,
.calendar-shell .calendar-header-cell span {
  color: #0f172a;
}

.stack {
  display: flex;
  flex-direction: column;
  gap: 14px;
}

.row {
  display: flex;
  align-items: center;
  gap: 12px;
}

.row.row-wrap {
  flex-wrap: wrap;
}

.row.space-between {
  justify-content: space-between;
}

.row.gap {
  gap: 10px;
}

.location-row {
  display: flex;
  gap: 8px;
  align-items: center;
}

.location-status {
  font-size: 0.78rem;
  margin-top: 4px;
  min-height: 1em;
  color: var(--text-soft);
  transition: color 0.2s ease;
}

.location-status.is-error {
  color: #f87171;
}

.location-status.is-success {
  color: #34d399;
}

.location-row input {
  flex: 1;
}

.location-suggestions {
  margin-top: 4px;
  border: 1px solid rgba(148, 163, 184, 0.3);
  border-radius: var(--radius-sm);
  background: rgba(255, 255, 255, 0.95);
  max-height: 180px;
  overflow-y: auto;
  font-size: 0.85rem;
  box-shadow: 0 10px 25px rgba(15, 23, 42, 0.15);
  display: none;
  position: relative;
  z-index: 3;
}

.location-suggestions.active {
  display: block;
}

.location-suggestions button {
  width: 100%;
  text-align: left;
  border: none;
  background: transparent;
  padding: 8px 10px;
  cursor: pointer;
  color: var(--text-main);
}

.location-suggestions button:hover {
  background: rgba(99, 102, 241, 0.1);
}

.card-header-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.quick-header-row h2 {
  margin: 0;
}

.mobile-only {
  display: none;
}

.mobile-stats-tabs {
  display: none;
}

.pill {
  display: inline-flex;
  align-items: center;
  padding: 6px 14px;
  border-radius: var(--radius-pill);
  font-size: 0.78rem;
  background: rgba(15, 23, 42, 0.06);
  color: var(--text-muted);
}

.pill.small {
  font-size: 0.7rem;
  padding: 3px 10px;
}

/* ===== Inputs ===== */

label {
  font-size: 0.82rem;
  color: var(--text-soft);
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.smart-input {
  position: relative;
  border-radius: var(--radius-md);
  overflow: visible;
  background: var(--surface-2);
  min-height: 48px;
}

.smart-input input {
  background: transparent;
  position: relative;
  z-index: 2;
  color: var(--input-fg, var(--color-card-foreground));
  caret-color: var(--input-fg, var(--color-card-foreground));
  width: 100%;
  border: none;
  overflow-x: auto;
  padding: 12px 14px;
}

.smart-input.has-highlights input {
  color: var(--input-fg, var(--color-card-foreground));
}

.smart-input-highlights {
  display: none;
}

.smart-input-highlights .placeholder {
  color: var(--text-muted);
}

.smart-input-highlights .hl-time {
  background: rgba(59, 130, 246, 0.18);
  border-radius: 10px;
  padding: 2px 4px;
}

.smart-input-highlights .hl-context {
  background: rgba(16, 185, 129, 0.2);
  border-radius: 10px;
  padding: 2px 4px;
}

.smart-input-highlights .hl-priority {
  background: rgba(249, 115, 22, 0.2);
  border-radius: 10px;
  padding: 2px 4px;
}

input::selection,
textarea::selection,
select::selection,
.smart-input input::selection {
  background: var(--selection-bg, rgba(99, 102, 241, 0.28));
  color: var(--selection-fg, #0f172a);
}

.smart-token-row {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  min-height: 18px;
}

.token-chip {
  padding: 2px 8px;
  border-radius: 999px;
  font-size: 0.72rem;
  border: 1px solid rgba(148, 163, 184, 0.4);
  color: var(--text-muted);
  background: rgba(255, 255, 255, 0.7);
  cursor: pointer;
}

.token-chip.time {
  border-color: rgba(59, 130, 246, 0.4);
  color: #1d4ed8;
}

.token-chip.context {
  border-color: rgba(16, 185, 129, 0.4);
  color: #047857;
}

.token-chip.priority {
  border-color: rgba(249, 115, 22, 0.4);
  color: #9a3412;
}

/* ===== Demo locks ===== */
.demo-locked {
  position: relative;
  filter: grayscale(0.25);
}

.demo-locked .demo-overlay {
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  text-align: center;
  background: rgba(0, 0, 0, 0.35);
  color: var(--color-card-foreground);
  border-radius: inherit;
  padding: 12px;
  pointer-events: auto;
  font-weight: 600;
  backdrop-filter: blur(2px);
}

.inline-subtasks {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  min-height: 20px;
  font-size: 0.78rem;
  color: var(--text-muted);
}

.inline-subtasks span {
  padding: 2px 8px;
  border-radius: var(--radius-pill);
  background: rgba(15, 23, 42, 0.05);
}

.textarea-field {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

input,
textarea,
select {
  appearance: none;
  width: 100%;
  padding: 12px 14px;
  border-radius: var(--radius-md);
  border: 1px solid var(--border-glass);
  background: var(--input-bg, var(--surface-2));
  color: var(--input-fg, var(--color-card-foreground));
  font-size: 0.95rem;
  transition: border-color 0.2s ease, box-shadow 0.2s ease, transform 0.1s ease;
  box-shadow: inset 0 1px 0 var(--border-glass);
}

textarea {
  resize: vertical;
  min-height: 90px;
}

input:focus,
textarea:focus,
select:focus {
  border-color: var(--accent);
  box-shadow: var(--shadow-focus);
  background: var(--input-bg, var(--surface-1));
}

.checkbox-row {
  flex-direction: row;
  align-items: center;
  font-size: 0.9rem;
  color: var(--text-main);
}

.checkbox-row input {
  width: 18px;
  height: 18px;
}

.field-actions {
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-size: 0.75rem;
  color: var(--text-muted);
}

.link-btn {
  background: transparent;
  border: none;
  color: var(--accent-strong);
  font-weight: 600;
  cursor: pointer;
  padding: 0;
}

.link-btn:hover {
  text-decoration: underline;
}

.smart-hint-block {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 8px 12px;
  border-radius: var(--radius-md);
  background: rgba(99, 102, 241, 0.08);
  border: 1px solid rgba(99, 102, 241, 0.25);
}

.smart-hint-text {
  margin: 0;
  font-size: 0.85rem;
  color: var(--text-main);
}

.focus-suggestion {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 10px 14px;
  border-radius: var(--radius-lg);
  background: rgba(15, 23, 42, 0.04);
  border: 1px dashed rgba(99, 102, 241, 0.3);
}

.focus-suggestion strong {
  font-size: 0.75rem;
  letter-spacing: 0.18em;
  text-transform: uppercase;
  display: block;
  color: var(--text-muted);
}

.focus-suggestion p {
  margin: 4px 0 0;
  font-size: 0.9rem;
  color: var(--text-main);
}

.quick-advanced {
  border-radius: 18px;
  border: 1px solid rgba(148, 163, 184, 0.3);
  padding: 10px 12px;
  background: rgba(255, 255, 255, 0.8);
}

.quick-advanced summary {
  font-size: 0.75rem;
  letter-spacing: 0.16em;
  text-transform: uppercase;
  color: var(--text-muted);
  cursor: pointer;
}

.quick-advanced summary::-webkit-details-marker {
  display: none;
}

.quick-advanced[open] {
  padding-bottom: 14px;
}

.quick-advanced-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: 12px;
  margin-top: 10px;
}

.template-panel {
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding: 10px 12px;
  border-radius: var(--radius-lg);
  background: rgba(255, 255, 255, 0.7);
  border: 1px solid rgba(148, 163, 184, 0.3);
}

.template-panel select {
  margin-top: 4px;
}

.template-actions {
  display: flex;
  gap: 8px;
  align-items: center;
  justify-content: space-between;
}

.template-inline {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 8px;
  align-items: center;
}

.template-inline select {
  margin: 0;
}

.template-hint {
  font-size: 0.78rem;
  color: var(--text-soft);
}

.conflict-hint {
  margin-top: 10px;
  padding: 8px 12px;
  border-radius: var(--radius-md);
  font-size: 0.8rem;
  background: rgba(15, 23, 42, 0.04);
  color: var(--text-muted);
}

.conflict-hint.is-conflict {
  background: rgba(239, 68, 68, 0.12);
  color: #b91c1c;
}

.snooze-bar {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin: 12px 0;
}

.snooze-bar span {
  font-size: 0.75rem;
  letter-spacing: 0.18em;
  color: var(--text-soft);
}

.snooze-buttons {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.snooze-buttons .btn {
  border-radius: var(--radius-md);
}
.panel-collapsible {
  padding-top: 0;
}

.panel-collapsible summary {
  list-style: none;
  font-size: 0.85rem;
  text-transform: uppercase;
  letter-spacing: 0.2em;
  color: var(--text-soft);
  padding: 16px 0 10px;
  cursor: pointer;
}

.panel-collapsible summary::-webkit-details-marker {
  display: none;
}

.panel-collapsible[open] summary {
  border-bottom: 1px solid rgba(148, 163, 184, 0.2);
  margin-bottom: 12px;
}

/* ===== Buttons ===== */

.btn {
  border-radius: var(--radius-pill);
  border: 1px solid var(--border-glass);
  padding: 9px 20px;
  font-size: 0.9rem;
  font-weight: 600;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  background: var(--color-card-bg);
  color: var(--color-card-foreground);
  transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
}

.btn:hover {
  transform: translateY(-1px);
  box-shadow: var(--shadow-soft);
}

.btn.primary {
  background: var(--color-accent);
  border: none;
  color: var(--color-accent-foreground);
  box-shadow: var(--shadow-focus);
}

.btn.secondary {
  background: var(--accent-soft);
  color: var(--color-accent-foreground);
  border: 1px solid var(--border-glass);
}

.btn.ghost {
  background: var(--surface-2);
  border: 1px solid var(--border-glass);
  color: var(--color-card-foreground);
}

.btn.danger {
  background: var(--color-danger);
  border: 1px solid var(--border-glass);
  color: var(--color-danger-foreground);
}

.btn.small {
  font-size: 0.8rem;
  padding: 6px 16px;
}

.btn.icon {
  width: 34px;
  height: 34px;
  padding: 0;
}

.btn.full {
  width: 100%;
}

/* ===== Task list ===== */

.task-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
  max-height: 270px;
  overflow-y: auto;
  padding-right: 8px;
  color: var(--color-card-foreground);
}

.task-board-card {
  display: none;
}

.board-subtitle {
  margin: 0 0 12px;
  font-size: 0.85rem;
  color: var(--text-soft);
}

.task-board {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 14px;
}

.task-board-column {
  border-radius: 18px;
  background: var(--surface-2);
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  border: 1px dashed var(--border-glass);
}

.task-board-column header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-size: 0.85rem;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.08em;
}

.task-board-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  min-height: 90px;
  border-radius: 14px;
  padding: 6px;
  background: var(--surface-1);
  transition: border 0.2s ease, box-shadow 0.2s ease;
}

.task-board-list.is-drop-target {
  box-shadow: 0 0 0 2px var(--accent-soft);
}

.task-board-item {
  border-radius: 12px;
  padding: 10px;
  background: var(--surface-1);
  border: 1px solid var(--border-glass);
  box-shadow: 0 6px 16px rgba(15, 23, 42, 0.12);
  cursor: grab;
  display: flex;
  flex-direction: column;
  gap: 4px;
  color: var(--color-card-foreground);
}

.task-board-item:active {
  cursor: grabbing;
}

.task-board-item h4 {
  margin: 0;
  font-size: 0.9rem;
}

.task-board-item p {
  margin: 0;
  font-size: 0.78rem;
  color: var(--text-muted);
}

.task-board-item .task-meta {
  font-size: 0.75rem;
  color: var(--text-soft);
}

.task-board-item.variant-minimal {
  border-style: dashed;
  background: var(--surface-2);
  box-shadow: none;
}

.task-board-item.variant-minimal p,
.task-board-item.variant-minimal .task-meta {
  display: none;
}

.task-board-item.variant-compact {
  padding: 8px;
  gap: 2px;
}

.task-board-item.variant-wide {
  flex-direction: row;
  align-items: center;
  gap: 12px;
}

.task-board-item.variant-wide h4 {
  flex: 1;
}

.task-board-item.variant-wide p {
  display: none;
}

.task-board-item.variant-wide .task-meta {
  margin-left: auto;
}

.task-board-item.variant-compact h4 {
  font-size: 0.86rem;
}

.task-board-item.variant-compact .task-meta {
  font-size: 0.7rem;
}

:root[data-toggle-density="compact"] .task-board {
  gap: 10px;
}

:root[data-toggle-density="spacious"] .task-board {
  gap: 18px;
}

:root[data-toggle-density="spacious"] .task-board-item {
  padding: 14px;
}

/* ===== View toggles ===== */

#app[data-view="tasks"] .task-board-card {
  display: block;
}

#app[data-view="tasks"] .calendar-shell,
#app[data-view="tasks"] .column-right {
  display: none;
}

#app[data-view="tasks"] .layout {
  grid-template-columns: minmax(0, 1fr);
}

#app[data-view="tasks"] .column-left {
  grid-column: 1 / -1;
}

#app[data-view="automations"] .column-left,
#app[data-view="automations"] .column-center,
#app[data-view="automations"] .overview-card,
#app[data-view="automations"] .insights-card {
  display: none;
}

#app[data-view="automations"] .layout {
  grid-template-columns: 1fr;
}

#app[data-view="automations"] .column-right {
  display: flex;
  flex-direction: column;
  grid-column: 1 / -1;
}

#app[data-view="automations"] .email-card {
  display: block;
}

#app[data-view="insights"] .column-left,
#app[data-view="insights"] .column-center,
#app[data-view="insights"] .email-card,
#app[data-view="insights"] .overview-card {
  display: none;
}

#app[data-view="insights"] .layout {
  grid-template-columns: 1fr;
}

#app[data-view="insights"] .insights-card {
  display: block;
}

.email-card {
  padding: 20px 22px 24px;
  display: flex;
  flex-direction: column;
  gap: 14px;
}

.settings-card {
  padding: 16px 18px;
  display: none;
}

.theme-card {
  padding: 18px 20px;
}

.theme-lab {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.theme-section {
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding: 10px 12px;
  border-radius: var(--radius-lg);
  border: 1px solid var(--border-glass);
  background: var(--surface-1);
}

.theme-section-head {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 12px;
}

.theme-section-head.inline {
  align-items: center;
}

.quick-theme-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  gap: 8px;
}

.quick-theme {
  padding: 12px 14px;
  border-radius: var(--radius-md);
  border: 1px solid rgba(255, 255, 255, 0.18);
  background: linear-gradient(160deg, rgba(255, 255, 255, 0.08), var(--surface-2));
  color: var(--color-card-foreground);
  font-weight: 700;
  cursor: pointer;
  transition: transform 0.12s ease, box-shadow 0.12s ease, border-color 0.12s ease, color 0.2s ease;
}

.quick-theme:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-soft);
  border-color: rgba(255, 255, 255, 0.32);
}

.theme-pack-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 10px;
}

.theme-pack-grid label {
  display: flex;
  flex-direction: column;
  gap: 6px;
  font-size: 0.9rem;
}

.theme-pack-grid select,
.theme-pack-grid input[type="color"] {
  border-radius: var(--radius-md);
  border: 1px solid rgba(255, 255, 255, 0.2);
  padding: 8px 10px;
  background: var(--surface-1);
  color: var(--color-card-foreground);
}

.theme-pack-grid input[type="color"] {
  height: 38px;
}

.theme-preview-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 10px;
  margin-bottom: 10px;
}

.theme-thumb {
  position: relative;
  padding: 12px;
  border-radius: var(--radius-lg);
  border: 1px solid var(--border-strong);
  background: linear-gradient(140deg, var(--page-gradient-a), var(--surface-1));
  box-shadow: var(--shadow-soft);
  overflow: hidden;
}

.theme-thumb::after {
  content: "";
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at 30% 20%, var(--accent-soft), transparent 40%),
    radial-gradient(circle at 80% 40%, rgba(255, 255, 255, 0.18), transparent 35%);
  pointer-events: none;
}

.theme-thumb-head {
  position: relative;
  z-index: 1;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  margin-bottom: 8px;
}

.theme-thumb-head h4 {
  margin: 0;
  font-size: 1rem;
}

.theme-thumb-body {
  position: relative;
  z-index: 1;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.theme-advanced.hidden {
  display: none;
}

.theme-override-select {
  border-radius: var(--radius-md);
  border: 1px solid var(--border-strong);
  background: rgba(255, 255, 255, 0.92);
  color: var(--text-main);
  font-weight: 600;
  padding: 6px 8px;
}

.thumb-calendar {
  border-radius: var(--radius-md);
  padding: 10px;
  background: var(--card-glass);
  border: 1px solid var(--border-strong);
  box-shadow: var(--shadow-soft);
}

.thumb-calendar-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}

.thumb-calendar-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 6px;
  margin-top: 8px;
}

.thumb-calendar-grid.compact {
  grid-template-columns: repeat(6, 1fr);
}

.thumb-block {
  display: block;
  height: 10px;
  border-radius: var(--radius-sm);
  background: var(--prio-medium-bg);
}

.thumb-block.accent {
  background: var(--accent);
}

.thumb-block.warm {
  background: var(--prio-high-bg);
}

.thumb-block.cool {
  background: var(--prio-low-bg);
}

.thumb-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.thumb-task {
  border-radius: var(--radius-md);
  border: 1px solid var(--border-strong);
  background: var(--card-glass);
  padding: 8px 10px;
  box-shadow: var(--shadow-soft);
}

.thumb-task.accent {
  border-color: var(--accent-soft);
  background: linear-gradient(120deg, var(--card-glass), var(--accent-soft));
}

.thumb-task.soft {
  background: var(--card-glass-muted);
}

.thumb-task-title {
  height: 10px;
  width: 70%;
  border-radius: var(--radius-sm);
  background: var(--text-main);
  opacity: 0.14;
}

.thumb-task-meta {
  margin-top: 6px;
  height: 8px;
  width: 50%;
  border-radius: var(--radius-sm);
  background: var(--text-muted);
  opacity: 0.2;
}

.theme-thumb.is-override {
  border-color: rgba(99, 102, 241, 0.35);
  box-shadow: var(--shadow-lift);
}

.settings-section {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.settings-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 12px;
  flex-wrap: wrap;
}

.settings-template-save {
  display: flex;
  gap: 8px;
  align-items: center;
}

.icon-override-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 8px;
  align-items: end;
}

.icon-override-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-top: 8px;
}

.variant-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: 10px;
}

.variant-toggle-row {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 10px;
}

.variant-toggle {
  display: flex;
  flex-direction: column;
  gap: 6px;
  font-size: 0.88rem;
  color: var(--text-muted);
}

.chip-toggle {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

.chip-btn {
  padding: 6px 10px;
  border: 1px solid var(--border-strong);
  border-radius: var(--radius-pill);
  background: var(--surface-2);
  color: var(--color-card-foreground);
  font-size: 0.82rem;
  cursor: pointer;
  transition: border 0.15s ease, background 0.15s ease, color 0.15s ease;
}

.chip-btn.active {
  border-color: var(--accent);
  background: var(--accent-soft);
  color: var(--color-card-foreground);
  box-shadow: var(--shadow-soft);
}

.chip-btn:hover {
  border-color: var(--accent);
}

.nlp-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(170px, 1fr));
  gap: 8px;
  align-items: end;
}

.nlp-rule-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-top: 10px;
}

.nlp-rule-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding: 10px 12px;
  border-radius: var(--radius-md);
  border: 1px solid var(--border-glass);
  background: var(--surface-2);
  color: var(--color-card-foreground);
}

.nlp-rule-meta {
  display: flex;
  flex-direction: column;
  gap: 2px;
  font-size: 0.9rem;
}

.nlp-rule-meta small {
  color: var(--text-muted);
}

.automation-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(170px, 1fr));
  gap: 8px;
  align-items: end;
}

.automation-rule-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-top: 10px;
}

.automation-rule-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding: 10px 12px;
  border-radius: var(--radius-md);
  border: 1px solid var(--border-glass);
  background: var(--surface-2);
  color: var(--color-card-foreground);
}

.automation-rule-meta {
  display: flex;
  flex-direction: column;
  gap: 2px;
  font-size: 0.9rem;
}

.automation-rule-meta small {
  color: var(--text-muted);
}

.theme-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 14px;
  margin-top: 4px;
}

.theme-column {
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding: 10px 12px;
  border-radius: var(--radius-lg);
  border: 1px dashed rgba(99, 102, 241, 0.18);
  background: rgba(255, 255, 255, 0.7);
}

.theme-field {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  font-size: 0.86rem;
  color: var(--text-main);
}

.theme-field input[type="color"] {
  width: 48px;
  height: 32px;
  padding: 0;
  border: 1px solid rgba(148, 163, 184, 0.4);
  border-radius: var(--radius-sm);
  background: var(--surface-1);
  cursor: pointer;
}

.theme-field input[type="range"] {
  flex: 1;
  margin-left: 10px;
}

.theme-inline {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}

.theme-presets {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 8px;
  align-items: end;
}

.theme-actions {
  display: flex;
  gap: 10px;
  align-items: center;
}

.theme-actions .btn,
.theme-presets .btn {
  white-space: nowrap;
}

.pill.tiny {
  padding: 2px 8px;
  font-size: 0.7rem;
}

.pill.tiny.accent {
  background: var(--accent-soft);
  color: var(--text-main);
}

.theme-grid textarea {
  width: 100%;
  border-radius: var(--radius-md);
  border: 1px solid rgba(148, 163, 184, 0.35);
  background: rgba(255, 255, 255, 0.85);
  padding: 10px;
  font-family: var(--font-sans);
}

.settings-template-save input {
  min-width: 180px;
}

.settings-template-save {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  align-items: center;
}

.template-manager {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-top: 8px;
}

.template-gallery {
  margin-top: 16px;
  padding: 10px 12px;
  border-radius: var(--radius-md);
  border: 1px solid rgba(148, 163, 184, 0.3);
  background: rgba(255, 255, 255, 0.78);
  box-shadow: 0 15px 36px rgba(15, 23, 42, 0.08);
}

.template-gallery-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  margin-bottom: 8px;
}

.template-gallery-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 10px;
}

.template-gallery-card {
  border-radius: var(--radius-md);
  border: 1px solid rgba(148, 163, 184, 0.3);
  background: linear-gradient(145deg, rgba(255, 255, 255, 0.9), rgba(236, 240, 255, 0.9));
  padding: 10px 12px;
  box-shadow: 0 12px 28px rgba(15, 23, 42, 0.12);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.template-gallery-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 14px 34px rgba(99, 102, 241, 0.16);
}

.template-gallery-card h5 {
  margin: 0 0 4px;
  font-size: 1rem;
}

.template-gallery-card p {
  margin: 0 0 8px;
  color: var(--text-soft);
  font-size: 0.88rem;
}

.template-gallery-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  margin-bottom: 8px;
}

.template-gallery-tag {
  padding: 4px 8px;
  border-radius: var(--radius-pill);
  background: rgba(99, 102, 241, 0.12);
  color: var(--color-card-foreground);
  font-weight: 600;
  font-size: 0.78rem;
}

.template-gallery {
  margin-top: 16px;
  padding: 12px;
  border-radius: var(--radius-lg);
  border: 1px solid rgba(148, 163, 184, 0.35);
  background: rgba(255, 255, 255, 0.82);
  box-shadow: 0 18px 40px rgba(15, 23, 42, 0.12);
}

.template-gallery-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: 10px;
}

.template-gallery-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 10px;
}

.template-gallery-card {
  position: relative;
  padding: 12px;
  border-radius: var(--radius-md);
  border: 1px solid rgba(148, 163, 184, 0.28);
  background: linear-gradient(130deg, rgba(255, 255, 255, 0.95), rgba(226, 232, 255, 0.88));
  box-shadow: 0 12px 28px rgba(15, 23, 42, 0.08);
  transition: transform 0.18s ease, box-shadow 0.18s ease;
  overflow: hidden;
}

.template-gallery-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 18px 44px rgba(99, 102, 241, 0.16);
}

.template-gallery-card h5 {
  margin: 0 0 4px;
  font-size: 0.95rem;
}

.template-gallery-card p {
  margin: 0 0 8px;
  color: var(--text-soft);
  font-size: 0.85rem;
}

.template-gallery-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  margin-bottom: 8px;
}

.template-gallery-apply {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}

.template-advanced-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 10px;
  margin-top: 10px;
}

.template-advanced-grid input,
.template-advanced-grid select {
  width: 100%;
}

.icon-override-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  padding: 8px 10px;
  border-radius: var(--radius-md);
  border: 1px solid var(--border-glass);
  background: var(--surface-2);
  color: var(--color-card-foreground);
}

.icon-override-row button {
  flex-shrink: 0;
}

.status-line.is-on {
  color: var(--color-success);
  font-weight: 700;
}

.template-manager-row {
  display: flex;
  justify-content: space-between;
  gap: 10px;
  padding: 10px 12px;
  border-radius: var(--radius-md);
  border: 1px solid rgba(148, 163, 184, 0.3);
  background: rgba(255, 255, 255, 0.75);
}

.template-manager-row .meta {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.template-manager-row h4 {
  margin: 0;
  font-size: 0.95rem;
}

.template-manager-row p {
  margin: 0;
  font-size: 0.82rem;
  color: var(--text-soft);
}

.template-manager-actions {
  display: flex;
  gap: 8px;
  align-items: center;
}

.task-item {
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding: 16px;
  border-radius: 18px;
  border: 1px solid rgba(99, 102, 241, 0.12);
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(248, 250, 252, 0.85));
  cursor: pointer;
  transition: transform 0.15s ease, box-shadow 0.2s ease, border-color 0.2s ease;
}

.task-item:hover {
  transform: translateY(-3px);
  box-shadow: var(--shadow-soft);
  border-color: rgba(99, 102, 241, 0.4);
}

.task-item.variant-minimal {
  background: var(--surface-1);
  border-style: dashed;
  gap: 6px;
}

.task-item.variant-minimal .task-desc {
  display: none;
}

.task-item.variant-minimal .task-meta,
.task-item.variant-minimal .task-tags {
  display: none;
}

.task-item.variant-compact {
  padding: 12px;
  gap: 6px;
}

.task-item.variant-compact .task-title {
  font-size: 0.95rem;
}

.task-item.variant-wide {
  flex-direction: row;
  align-items: center;
  gap: 14px;
}

.task-item.variant-wide .task-main {
  flex: 1;
}

.task-item.variant-wide .task-tags {
  justify-content: flex-end;
  gap: 8px;
}

.task-item.variant-compact .task-meta {
  font-size: 0.72rem;
}

.task-item.variant-compact .tag {
  padding: 3px 8px;
}

:root[data-toggle-density="compact"] .task-item {
  padding: 12px;
  gap: 6px;
}

:root[data-toggle-density="spacious"] .task-item {
  padding: 20px 18px;
  gap: 14px;
}

:root[data-toggle-density="compact"] .task-list {
  gap: 8px;
}

:root[data-toggle-density="spacious"] .task-list {
  gap: 16px;
}

.task-main {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.task-title-row {
  display: flex;
  align-items: center;
  gap: 10px;
}

.task-title {
  font-size: 1rem;
  font-weight: 600;
}

.task-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 1rem;
  margin-right: 6px;
}

.task-desc {
  font-size: 0.85rem;
  color: var(--text-muted);
}

.task-meta {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  font-size: 0.78rem;
  color: var(--text-soft);
}

.task-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.tag {
  padding: 4px 10px;
  border-radius: var(--radius-md);
  font-size: 0.72rem;
  border: 1px solid transparent;
  text-transform: capitalize;
}

.tag-priority-high {
  background: var(--prio-high-bg);
  color: var(--prio-high);
  border-color: rgba(249, 115, 22, 0.4);
}

.tag-priority-medium {
  background: var(--prio-medium-bg);
  color: var(--prio-medium);
  border-color: rgba(99, 102, 241, 0.4);
}

.tag-priority-low {
  background: var(--prio-low-bg);
  color: var(--prio-low);
  border-color: rgba(34, 197, 94, 0.4);
}

.tag-status-done {
  background: rgba(16, 185, 129, 0.16);
  border-color: rgba(5, 150, 105, 0.35);
  color: #047857;
}

.tag-status-in_progress {
  background: rgba(14, 165, 233, 0.16);
  border-color: rgba(14, 165, 233, 0.4);
  color: #0369a1;
}

.tag-status-pending {
  background: rgba(15, 23, 42, 0.06);
  border-color: rgba(15, 23, 42, 0.12);
  color: var(--text-muted);
}

.tag-context {
  background: rgba(79, 70, 229, 0.12);
  border-color: rgba(79, 70, 229, 0.4);
  color: #4f46e5;
}

.tag-recurring {
  background: rgba(59, 130, 246, 0.16);
  border-color: rgba(59, 130, 246, 0.4);
  color: #1d4ed8;
}

/* ===== Stats ===== */

.stats-block {
  display: flex;
  flex-direction: column;
  gap: 14px;
  font-size: 0.9rem;
}

.stats-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  color: var(--text-muted);
}

.stats-badge {
  padding: 6px 14px;
  border-radius: var(--radius-pill);
  background: var(--surface-2);
  border: 1px solid var(--border-glass);
  font-weight: 600;
  color: var(--color-card-foreground);
}

.status-line {
  font-size: 0.85rem;
  min-height: 20px;
  color: var(--text-muted);
}

.insights-panel {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.insight-row {
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 10px;
  border-radius: 14px;
  background: rgba(99, 102, 241, 0.08);
  border: 1px solid rgba(99, 102, 241, 0.2);
}

.insight-row strong {
  font-size: 0.95rem;
}

.insight-row span {
  font-size: 0.9rem;
}

.insight-row small {
  font-size: 0.78rem;
  color: var(--text-soft);
}

.email-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.email-head h2 {
  margin: 0;
  font-size: 1.1rem;
  color: var(--text-main);
}

.email-head .email-sub {
  margin: 4px 0 0;
  color: var(--text-muted);
  font-size: 0.9rem;
}

.email-status-pill {
  padding: 8px 14px;
  border-radius: var(--radius-pill);
  background: var(--accent-soft);
  color: var(--color-accent-foreground);
  border: 1px solid var(--border-glass);
  font-weight: 700;
  font-size: 0.9rem;
  white-space: nowrap;
}

.email-status-pill.is-on {
  background: var(--accent-gradient);
  color: var(--color-accent-foreground);
  border-color: transparent;
  box-shadow: 0 10px 24px rgba(99, 102, 241, 0.25);
}

.email-grid {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 12px;
}

.email-grid label {
    margin: 0;
}

.email-grid .email-span-2 {
    grid-column: 1 / -1;
}

.toggle-field {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  background: var(--surface-2);
  border: 1px solid var(--border-glass);
  border-radius: var(--radius-md);
  padding: 10px 12px;
  font-size: 0.9rem;
  color: var(--text-main);
}

.toggle-field input {
  appearance: none;
  width: 44px;
  height: 24px;
  margin: 0;
  border-radius: 999px;
  background: var(--surface-3);
  border: 1px solid var(--border-glass);
  position: relative;
  cursor: pointer;
  transition: background 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease;
}

.toggle-field input::after {
  content: "";
  position: absolute;
  top: 2px;
  left: 2px;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: var(--color-card-foreground);
  box-shadow: 0 2px 6px rgba(15, 23, 42, 0.15);
  transition: transform 0.2s ease;
}

.toggle-field input:checked {
  background: var(--color-accent);
  border-color: transparent;
  box-shadow: 0 8px 18px rgba(99, 102, 241, 0.35);
}

.toggle-field input:checked::after {
  transform: translateX(18px);
}

.email-actions {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}

.email-chips {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

/* ===== Calendar ===== */

.calendar-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.calendar-nav {
  display: flex;
  align-items: center;
  gap: 12px;
}

.calendar-header-tools {
  display: flex;
  align-items: center;
  gap: 12px;
}

.density-switch {
  display: inline-flex;
  border-radius: var(--radius-pill);
  background: rgba(99, 102, 241, 0.08);
  border: 1px solid rgba(99, 102, 241, 0.2);
  padding: 3px;
}

.density-btn {
  border: none;
  background: transparent;
  color: var(--text-soft);
  font-size: 0.78rem;
  padding: 4px 10px;
  border-radius: var(--radius-pill);
  cursor: pointer;
  transition: background 0.2s ease, color 0.2s ease;
}

.density-btn.active {
  background: rgba(99, 102, 241, 0.25);
  color: var(--color-accent-foreground);
  box-shadow: 0 6px 12px rgba(99, 102, 241, 0.35);
}

.calendar-nav button {
  transition: transform 0.25s ease, box-shadow 0.25s ease;
}

.calendar-nav button:hover {
  transform: translateY(-3px);
  box-shadow: 0 10px 24px rgba(99, 102, 241, 0.25);
}

.calendar-label {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

#calendarRange {
  font-size: 1.05rem;
  font-weight: 600;
}

.calendar-week-tag {
  font-size: 0.85rem;
  color: var(--text-soft);
}

.calendar-legend {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  font-size: 0.82rem;
  color: var(--text-soft);
}

.calendar-grid-wrapper {
  position: relative;
  margin-top: 14px;
  border-radius: 50px;
  padding: 18px;
  background: radial-gradient(circle at 20% 20%, rgba(255, 255, 255, 0.75), transparent 60%),
    radial-gradient(circle at 80% 0%, rgba(79, 70, 229, 0.1), transparent 65%),
    rgba(15, 23, 42, 0.08);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 35px 80px rgba(15, 23, 42, 0.35);
  backdrop-filter: blur(28px);
}

.calendar-grid-wrapper::after {
  content: "";
  position: absolute;
  inset: 12px;
  border-radius: inherit;
  border: 1px solid rgba(255, 255, 255, 0.2);
  pointer-events: none;
  z-index: 0;
}

.legend-dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
}

.legend-high {
  background: var(--prio-high);
}

.legend-medium {
  background: var(--prio-medium);
}

.legend-low {
  background: var(--prio-low);
}

.calendar-grid {
  margin-top: 0;
  border-radius: 32px;
  border: 1px solid rgba(148, 163, 184, 0.25);
  overflow: hidden;
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.96), rgba(245, 247, 255, 0.98));
  display: grid;
  grid-template-columns: 90px repeat(7, minmax(0, 1fr));
  grid-auto-rows: var(--slot-height, 52px);
  box-shadow: 0 30px 80px rgba(15, 23, 42, 0.25);
  position: relative;
  z-index: 1;
  backdrop-filter: blur(12px) saturate(120%);
  transition: transform 0.4s ease, box-shadow 0.4s ease;
  color: var(--color-card-foreground);
}

.calendar-grid::before,
.calendar-grid::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
}

.calendar-grid::before {
  background: radial-gradient(circle at 20% 15%, rgba(99, 102, 241, 0.12), transparent 45%),
    radial-gradient(circle at 80% 10%, rgba(236, 72, 153, 0.1), transparent 60%);
  filter: blur(10px);
}

.calendar-grid::after {
  border-radius: inherit;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.8);
}

.calendar-grid.is-transitioning {
  animation: calendarSwap 0.55s ease;
}

.calendar-grid.flip-left,
.calendar-grid.flip-right {
  animation: calendarSlide 0.45s ease;
}

@keyframes calendarSlide {
  0% {
    transform: translateX(var(--flip-offset, 0)) scale(0.99);
    filter: blur(6px);
    opacity: 0.7;
  }
  100% {
    transform: translateX(0) scale(1);
    filter: blur(0);
    opacity: 1;
  }
}

.calendar-grid.flip-left {
  --flip-offset: -2%;
}

.calendar-grid.flip-right {
  --flip-offset: 2%;
}

@media (prefers-reduced-motion: reduce) {
  .calendar-grid,
  .calendar-grid.flip-left,
  .calendar-grid.flip-right {
    animation: none !important;
  }
}

@keyframes calendarSwap {
  0% {
    opacity: 0;
    transform: translateY(18px) scale(0.98);
    filter: blur(8px);
  }
  60% {
    opacity: 1;
    transform: translateY(0) scale(1);
    filter: blur(0);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
    filter: blur(0);
  }
}

.calendar-header-cell {
  background: rgba(99, 102, 241, 0.08);
  border-bottom: 1px solid rgba(148, 163, 184, 0.3);
  border-right: 1px solid rgba(148, 163, 184, 0.18);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  font-size: 0.85rem;
  font-weight: 600;
  gap: 4px;
  transition: background 0.2s ease, color 0.2s ease;
}

.calendar-header-cell span:last-child {
  font-size: 0.8rem;
  font-weight: 500;
  color: var(--text-soft);
}

.calendar-header-cell.today {
  background: linear-gradient(120deg, rgba(99, 102, 241, 0.2), rgba(14, 165, 233, 0.2));
  color: var(--accent-strong);
  position: relative;
  outline: 1px solid rgba(99, 102, 241, 0.35);
  box-shadow: inset 0 0 0 1px rgba(99, 102, 241, 0.3);
}

.calendar-time-cell {
  border-right: 1px solid rgba(148, 163, 184, 0.2);
  border-bottom: 1px solid rgba(148, 163, 184, 0.16);
  display: flex;
  align-items: center;
  justify-content: flex-end;
  padding: 0 12px;
  font-size: 0.8rem;
  color: var(--text-soft);
}

.calendar-slot {
  border-bottom: 1px solid rgba(148, 163, 184, 0.16);
  border-right: 1px solid rgba(148, 163, 184, 0.1);
  position: relative;
  padding: 0;
  cursor: pointer;
  transition: background 0.15s ease, box-shadow 0.2s ease;
  background: rgba(255, 255, 255, 0.9);
  overflow: hidden;
}

.calendar-slot::after {
  content: "";
  position: absolute;
  inset: 6px;
  border-radius: var(--radius-sm);
  background: transparent;
  transition: background 0.2s ease;
}

.calendar-slot:hover::after {
  background: rgba(99, 102, 241, 0.08);
}

.calendar-slot.is-today:hover::after {
  background: rgba(99, 102, 241, 0.12);
}

.calendar-slot:nth-child(2n) {
  background: rgba(15, 23, 42, 0.01);
}

.calendar-slot.is-drop-target::after {
  background: rgba(99, 102, 241, 0.18);
  border: 1px dashed rgba(99, 102, 241, 0.6);
}

.calendar-slot.is-today {
  background: linear-gradient(180deg, rgba(99, 102, 241, 0.06), rgba(79, 70, 229, 0.02));
  box-shadow: inset 0 0 0 1px rgba(99, 102, 241, 0.18);
}

.calendar-slot.is-current-hour {
  background: linear-gradient(90deg, rgba(99, 102, 241, 0.18), rgba(59, 130, 246, 0.16));
  box-shadow: inset 0 0 0 2px rgba(99, 102, 241, 0.28), inset 0 -8px 18px rgba(59, 130, 246, 0.1);
}

.calendar-slot.is-current-hour::after {
  background: rgba(99, 102, 241, 0.12);
}

.cal-task-block {
  position: absolute;
  z-index: 1;
  border-radius: 14px;
  padding: 0;
  font-size: 0.9rem;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border: 1px solid transparent;
  backdrop-filter: blur(4px);
  box-shadow: 0 6px 18px rgba(15, 23, 42, 0.15);
  background: transparent;
  color: var(--color-card-foreground);
  transition: transform 0.15s ease;
  animation: taskMount 0.35s ease;
  left: 8px;
  right: auto;
  top: 4px;
  min-height: 34px;
  max-width: calc(100% - 20px);
  gap: 0;
  line-height: 1.2;
  word-break: keep-all;
  overflow: hidden;
}

.cal-task-block:hover {
  transform: translateY(-2px);
}

.cal-task-high {
  background: linear-gradient(135deg, var(--color-danger), rgba(249, 115, 22, 0.8));
  border-color: var(--color-danger-foreground);
  color: var(--color-danger-foreground);
}

.cal-task-medium {
  background: linear-gradient(135deg, var(--color-accent), rgba(76, 89, 241, 0.9));
  border-color: var(--color-accent-foreground);
  color: var(--color-accent-foreground);
}

.cal-task-low {
  background: linear-gradient(135deg, var(--color-success), rgba(52, 211, 153, 0.85));
  border-color: var(--color-success-foreground);
  color: var(--color-success-foreground);
}

.cal-task-conflict {
  box-shadow: 0 0 0 2px rgba(239, 68, 68, 0.4);
}

.cal-slot-more {
  position: absolute;
  bottom: 6px;
  right: 8px;
  font-size: 0.72rem;
  color: var(--text-soft);
  background: rgba(15, 23, 42, 0.05);
  border-radius: var(--radius-pill);
  padding: 2px 8px;
}

.cal-task-tag {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 10px 16px;
  border-radius: var(--radius-pill);
  font-size: 0.85rem;
  background: var(--surface-2);
  color: var(--color-card-foreground);
  border: 1px solid var(--border-glass);
  text-transform: capitalize;
  max-width: 100%;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

@keyframes taskMount {
  0% {
    opacity: 0;
    transform: translateY(6px) scale(0.98);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* ===== Widget drawer ===== */

.widget-drawer {
  position: fixed;
  inset: 0;
  display: none;
  z-index: 12;
}

.widget-drawer.open {
  display: block;
}

.widget-drawer-backdrop {
  position: absolute;
  inset: 0;
  background: rgba(15, 23, 42, 0.4);
  backdrop-filter: blur(8px);
  animation: fadeIn 0.25s ease;
}

.widget-drawer-panel {
  position: absolute;
  inset: 0 0 0 auto;
  width: min(420px, 86vw);
  background: linear-gradient(150deg, rgba(255, 255, 255, 0.9), rgba(226, 232, 255, 0.9));
  border-left: 1px solid rgba(148, 163, 184, 0.35);
  box-shadow: -20px 0 60px rgba(15, 23, 42, 0.22);
  padding: 22px 20px;
  overflow-y: auto;
  transform: translateX(100%);
  transition: transform 0.28s ease, box-shadow 0.28s ease;
  backdrop-filter: blur(12px);
}

.widget-drawer.open .widget-drawer-panel {
  transform: translateX(0);
}

.widget-drawer-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  margin-bottom: 12px;
}

.widget-drawer-header h3 {
  margin: 0;
  font-size: 1.2rem;
}

.widget-drawer-close {
  width: 38px;
  height: 38px;
  border-radius: 50%;
}

.widget-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: 12px;
}

.widget-card {
  padding: 14px;
  border-radius: 16px;
  background: rgba(255, 255, 255, 0.82);
  border: 1px solid rgba(148, 163, 184, 0.3);
  box-shadow: 0 18px 38px rgba(15, 23, 42, 0.12);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.widget-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 20px 44px rgba(99, 102, 241, 0.18);
}

.widget-card h4 {
  margin: 0 0 6px;
  font-size: 1rem;
}

.widget-card p {
  margin: 0;
  color: var(--text-soft);
  font-size: 0.9rem;
}

.widget-chip-row {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 10px;
}

.widget-chip {
  padding: 6px 10px;
  border-radius: 999px;
  background: rgba(99, 102, 241, 0.12);
  color: var(--color-card-foreground);
  font-weight: 600;
  font-size: 0.82rem;
  border: 1px solid rgba(99, 102, 241, 0.2);
}

.widget-list {
  list-style: none;
  padding: 0;
  margin: 12px 0 0;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.widget-list li {
  padding: 10px 12px;
  border-radius: 12px;
  background: rgba(15, 23, 42, 0.04);
  display: flex;
  align-items: center;
  justify-content: space-between;
  color: var(--text-main);
}

.widget-list small {
  color: var(--text-soft);
}

.widget-toggle-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.switch {
  position: relative;
  display: inline-block;
  width: 48px;
  height: 26px;
}

.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.slider {
  position: absolute;
  cursor: pointer;
  inset: 0;
  background-color: rgba(148, 163, 184, 0.5);
  transition: 0.2s;
  border-radius: 40px;
}

.slider:before {
  position: absolute;
  content: "";
  height: 20px;
  width: 20px;
  left: 3px;
  bottom: 3px;
  background-color: white;
  transition: 0.2s;
  border-radius: 50%;
  box-shadow: 0 6px 12px rgba(15, 23, 42, 0.2);
}

.switch input:checked + .slider {
  background-color: rgba(99, 102, 241, 0.7);
}

.switch input:checked + .slider:before {
  transform: translateX(20px);
}

body.space-saver-on .phase-row {
  display: none;
}

body.space-saver-on .hero-panel {
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
}

body.space-saver-on .hero-card:not(:first-child) {
  display: none;
}

body.space-saver-on .card {
  margin-bottom: 14px;
}

body.space-saver-on .column {
  gap: 12px;
}

body.space-saver-on .card-quick {
  box-shadow: var(--shadow-soft);
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* ===== Onboarding overlay ===== */

.layout-onboarding {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 11;
}

.layout-onboarding.hidden {
  display: none;
}

.layout-onboarding-backdrop {
  position: absolute;
  inset: 0;
  background: rgba(15, 23, 42, 0.45);
  backdrop-filter: blur(8px);
}

.layout-onboarding-panel {
  position: relative;
  z-index: 1;
  width: min(920px, 92vw);
  background: linear-gradient(145deg, rgba(255, 255, 255, 0.96), rgba(226, 232, 255, 0.92));
  border: 1px solid rgba(148, 163, 184, 0.25);
  border-radius: 28px;
  padding: 24px 26px 20px;
  box-shadow: 0 35px 85px rgba(15, 23, 42, 0.22);
}

.onboarding-sub {
  margin: 6px 0 14px;
  color: var(--text-soft);
  font-size: 0.95rem;
}

.layout-choice-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 12px;
  margin: 12px 0 10px;
}

.layout-choice {
  width: 100%;
  text-align: left;
  background: rgba(255, 255, 255, 0.92);
  border: 1px solid rgba(99, 102, 241, 0.18);
  border-radius: 18px;
  padding: 14px;
  box-shadow: 0 12px 30px rgba(15, 23, 42, 0.08);
  cursor: pointer;
  transition: transform 0.15s ease, box-shadow 0.2s ease, border-color 0.2s ease;
}

.layout-choice:hover {
  transform: translateY(-2px);
  border-color: rgba(99, 102, 241, 0.35);
  box-shadow: 0 18px 40px rgba(15, 23, 42, 0.14);
}

.layout-choice .choice-label {
  display: block;
  font-weight: 700;
  color: var(--text-main);
  margin-bottom: 4px;
}

.layout-choice small {
  color: var(--text-muted);
  line-height: 1.4;
}

.layout-onboarding-actions {
  margin-top: 12px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.capture-sheet-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(15, 23, 42, 0.3);
  backdrop-filter: blur(4px);
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2s ease;
  z-index: 7;
}

body:not(.is-mobile) .capture-sheet-backdrop {
  display: none;
}

body.is-mobile .capture-sheet-backdrop {
  display: block;
}

body.capture-sheet-open .capture-sheet-backdrop {
  opacity: 1;
  pointer-events: auto;
}

body.capture-sheet-open {
  overflow: hidden;
}

/* ===== Modal ===== */

.modal {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10;
}

.modal.hidden {
  display: none;
}

.modal-backdrop {
  position: absolute;
  inset: 0;
  background: rgba(15, 23, 42, 0.4);
  backdrop-filter: blur(6px);
}

.modal-panel {
  position: relative;
  z-index: 1;
  width: min(520px, 100% - 32px);
  max-height: 82vh;
  overflow-y: auto;
  background: rgba(255, 255, 255, 0.98);
  border-radius: 26px;
  border: 1px solid rgba(148, 163, 184, 0.4);
  box-shadow: var(--shadow-lift);
  padding: 24px 26px 28px;
  animation: slideUp 0.35s ease;
}

.modal-header h2 {
  margin: 0;
  font-size: 0.9rem;
  letter-spacing: 0.16em;
  color: var(--text-soft);
}

/* ===== Scrollbar ===== */

::-webkit-scrollbar {
  width: 10px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: rgba(148, 163, 184, 0.5);
  border-radius: 999px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(99, 102, 241, 0.7);
}

/* ===== Animations ===== */

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ===== Responsive ===== */

@media (max-width: 1280px) {
  #app {
    padding: 18px;
  }
  .layout {
    grid-template-columns: 270px minmax(0, 1.7fr);
    grid-template-rows: auto auto;
    padding: 20px;
  }
  .column-right {
    order: 2;
    grid-column: 1 / -1;
  }
  .header-left {
    flex-direction: column;
    align-items: flex-start;
  }
}

@media (max-width: 900px) {
  .layout {
    grid-template-columns: 1fr;
    padding: 18px;
  }
  .card-stretch {
    min-height: 440px;
  }
  .header-actions {
    width: 100%;
    justify-content: flex-start;
  }
  .app-header {
    grid-template-columns: 1fr;
    gap: 18px;
  }
  .mobile-only {
    display: inline-flex;
  }
  .mobile-stats-tabs {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: 8px;
    margin-bottom: 12px;
  }
  .mobile-tab {
    border: 1px solid rgba(148, 163, 184, 0.4);
    background: rgba(255, 255, 255, 0.85);
    border-radius: var(--radius-md);
    padding: 10px 12px;
    font-weight: 600;
    color: var(--text-muted);
    cursor: pointer;
  }
  .mobile-tab.active {
    border-color: rgba(99, 102, 241, 0.4);
    color: var(--text-main);
    box-shadow: 0 10px 20px rgba(15, 23, 42, 0.1);
  }
  body.is-mobile .column-right [data-panel-id] {
    display: none;
  }
  body.is-mobile .column-right [data-panel-id].mobile-tab-active {
    display: block;
  }
  body.is-mobile .card-quick {
    position: fixed;
    left: 0;
    right: 0;
    bottom: -110%;
    z-index: 9;
    max-height: 80vh;
    overflow-y: auto;
    margin: 0 10px 10px;
    box-shadow: var(--shadow-lift);
    transition: bottom 0.28s ease;
  }
  body.is-mobile .card-quick .panel-controls {
    display: none;
  }
  body.is-mobile .card-quick .quick-header-row {
    position: sticky;
    top: 0;
    background: inherit;
    padding-bottom: 6px;
    z-index: 2;
  }
  body.capture-sheet-open .card-quick {
    bottom: 0;
  }
}

@media (max-width: 620px) {
  #app {
    padding: 14px;
  }
  .header-tabs {
    flex-wrap: wrap;
    justify-content: flex-start;
  }
  input,
  select,
  textarea {
    font-size: 0.9rem;
  }
}
